fragment ContainerResult on Container {
  name
  image
  privateRegistry {
    name
  }
  resources
  # @genqlient(flatten: true)
  environmentVariables {
      ... EnvironmentVariableResult
  }
  ports
  ingresses {
    domainName
    port
    enableTLS
    allowlist
    state
  }
  # @genqlient(flatten: true)
  mounts {
      ... ContainerMounts
  }
  healthCheck {
    port
    path
  }
  availableReplicas
  numberOfReplicas
  autoScaling {
    replicas {
      minimum
      maximum
      }
    triggers {
      type
      threshold
    }
  }
  state
  locked
}

query containerList($namespaceName: String!) {
  namespace(name: $namespaceName) {
    containers {
      ...ContainerResult
    }
  }
}

query containerByName($namespaceName: String!, $containerName: String!) {
    # @genqlient(flatten: true)
    container(containerResourceInput: {name: $containerName, namespace: $namespaceName}) {
        ...ContainerResult
    }
}

mutation containerCreate($input: ContainerCreateInput!) {
  # @genqlient(flatten: true)
  containerCreate(containerInput: $input) {
    ...ContainerResult
  }
}

mutation containerModify($input: ContainerModifyInput!) {
  # @genqlient(flatten: true)
  containerModify(containerInput: $input) {
    ...ContainerResult
  }
}

mutation containerDelete($namespace: String!, $container: String!) {
  containerDelete(container: {name: $container, namespace: $namespace})
}

